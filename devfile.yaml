schemaVersion: 2.1.0
metadata:
  attributes:
    metadata-name-field: generateName
    metadata-name-original-value: demo-ocp-gpt2-kerasnlp
  name: demo-ocp-gpt2-kerasnlp
attributes:
  controller.devfile.io/scc: container-build
  controller.devfile.io/storage-type: per-user
  dw.metadata.annotations:
    che.eclipse.org/devfile-source: |
      scm:
        repo: github.com/redhat-na-ssa/demo-ocp-gpt2-kerasnlp.git
        fileName: devfile.yaml
      factory:
        params: url=https://github.com/redhat-na-ssa/demo-ocp-gpt2-kerasnlp.git
projects:
  - git:
      remotes:
        origin: https://github.com/redhat-na-ssa/demo-ocp-gpt2-kerasnlp.git
      checkoutFrom:
        revision: main
    name: demo-ocp-gpt2-kerasnlp
components:
  - attributes:
      container-overrides:
        resources:
          limits:
            nvidia.com/gpu: '1'
      controller.devfile.io/merge-contribution: true
      memoryLimit: 16Gi
#      deployment/nvidia.com/gpu: '1'
    container:
#      env:
#        - name: PATH
#          value: /home/user/.local/bin:/home/user/.java/current/bin:/home/user/node_modules/.bin/:/home/user/.npm-global/bin/:/opt/app-root/src/.npm-global/bin/:/usr/share/maven/bin:/bin:/usr/bin"
      image: quay.io/bkozdemb/gpu-devspaces:latest
      sourceMapping: /projects
      volumeMounts:
        - name: venv
          path: /home/user/.venv
    name: python
  - name: venv
    volume:
      size: 1G
  # - attributes:
  #     controller.devfile.io/merge-contribution: false
  #     deployment/nvidia.com/gpu: '1'
  #   container:
  #     memoryLimit: 6Gi
  #     args:
  #       - '-f'
  #       - /dev/null
  #     command:
  #       - tail
  #     env:
  #       - name: BATCH_SIZE
  #         value: '-1'
  #       - name: NUM_EPOCHS
  #         value: '10'
  #       - name: IMG_RESIZE
  #         value: 'N'
  #       - name: IMG_WIDTH
  #         value: '200'
  #       - name: MODEL_BASE
  #         value: yolov8n.pt
  #       - name: DATASET_ZIP
  #         value: demo-ocp-gpt2-kerasnlp-yolo.zip
  #       - name: MODEL_WEIGHTS
  #         value: demo-ocp-gpt2-kerasnlp.pt
  #       - name: BUILD_VER
  #         value: '0.0'
  #       - name: MODEL_CLASSES
  #         value: demo-ocp-gpt2-kerasnlp.yaml
  #       - name: SIMPLEVIS_DATA
  #         value: /opt/app-root/src/simplevis-data
  #       - name: BASEDIR
  #         value: /opt/app-root/src
  #       - name: MINIO_ENDPOINT
  #         value: http://minio:9000
  #       - name: MINIO_BUCKET
  #         value: demo-ocp-gpt2-kerasnlp
  #       - name: MINIO_ACCESSKEY
  #         value: minioadmin
  #       - name: MINIO_SECRETKEY
  #         value: minioadmin
  #       - name: CHE_DASHBOARD_URL
  #         value: https://devspaces.apps.ocpsno2.davenet.local
  #       - name: CHE_PLUGIN_REGISTRY_URL
  #         value: https://devspaces.apps.ocpsno2.davenet.local/plugin-registry/v3
  #       - name: CHE_PLUGIN_REGISTRY_INTERNAL_URL
  #         value: http://plugin-registry.devspaces.svc:8080/v3
  #       - name: CLUSTER_CONSOLE_URL
  #         value: https://console-openshift-console.apps.ocpsno2.davenet.local
  #       - name: CLUSTER_CONSOLE_TITLE
  #         value: OpenShift console
  #       - name: OPENVSX_REGISTRY_URL
  #         value: ''
  #     image: quay.io/dawhite20910/devspace-tkn:latest
  #     sourceMapping: /projects
  #   name: my-custom
